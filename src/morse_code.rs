use std::collections::HashMap;
use deunicode::deunicode;

pub fn to_morse(input: &str) -> String {
    let morse = [
        ('a', ".-"),    ('b', "-..."),  ('c', "-.-."),  ('d', "-.."),   ('e', "."),
        ('f', "..-."),  ('g', "--."),   ('h', "...."),  ('i', ".."),    ('j', ".---"),
        ('k', "-.-"),   ('l', ".-.."),  ('m', "--"),    ('n', "-."),    ('o', "---"),
        ('p', ".--."),  ('q', "--.-"),  ('r', ".-."),   ('s', "..."),   ('t', "-"),
        ('u', "..-"),   ('v', "...-"),  ('w', ".--"),   ('x', "-..-"),  ('y', "-.--"),
        ('z', "--.."),  ('0', "-----"), ('1', ".----"), ('2', "..---"), ('3', "...--"),
        ('4', "....-"), ('5', "....."), ('6', "-...."), ('7', "--..."), ('8', "---.."),
        ('9', "----."), 
        ('.', ".-.-.-"), (',', "--..--"), ('?', "..--.."), ('!', "-.-.--"), 
        ('-', "-....-"), ('/', "-..-."), ('@', ".--.-."), ('(', "-.--."), (')', "-.--.-"),
        (':', "---..."), (';', "-.-.-."), ('=', "-...-"), ('+', ".-.-."), ('_', "..--.-"),
        ('\'', ".----."), ('\"', ".-..-."), ('&', ".-..."),
    ]
    .iter()
    .cloned()
    .collect::<HashMap<_, _>>();

    let cleaned = deunicode(input); // např. č → c, ř → r

    cleaned
        .to_lowercase()
        .split_whitespace()
        .map(|word| {
            word.chars()
                .filter_map(|c| morse.get(&c))
                .cloned()
                .collect::<Vec<_>>()
                .join("|")
        })
        .collect::<Vec<_>>()
        .join("||")
}